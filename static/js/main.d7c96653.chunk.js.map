{"version":3,"sources":["data/data.js","components/form/form.js","components/app/app.js","index.js"],"names":["axios","defaults","baseURL","getData","body","post","SubmitForm","state","loading","userCreatingErrorMessage","successMessage","netErrorMessage","initialValues","name","password","passwordConfirmation","email","website","skills","acceptTerms","validationSchema","Yup","max","required","matches","oneOf","url","age","min","onSubmit","values","a","resetForm","filteredSkills","filter","Boolean","setState","res","data","errorMessage","isAxiosError","response","handleClearCloneError","handleClearSuccess","this","className","onChange","htmlFor","Item","id","placeholder","size","Password","rowKey","row","pagination","columns","title","key","render","text","record","i","createNewRow","type","disabled","React","Component","App","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.d7c96653.chunk.js","sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'http://localhost:3012';\n// axios.defaults.timeout = 2000;\n\nconst getData = (body) => axios.post('/sign-up', body);\n\nexport default getData;\n","import React from 'react';\nimport { Formik } from 'formik';\nimport * as Yup from 'yup';\nimport {\n  Form,\n  Input,\n  InputNumber,\n  Table,\n  AddRowButton,\n  Checkbox,\n  SubmitButton,\n  ResetButton,\n} from 'formik-antd';\n\nimport getData from '../../data/data';\nimport './form.scss';\n\nclass SubmitForm extends React.Component {\n  state = {\n    loading: false,\n    userCreatingErrorMessage: null,\n    successMessage: null,\n    netErrorMessage: null,\n  };\n\n  initialValues = {\n    name: '',\n    password: '',\n    passwordConfirmation: '',\n    email: '',\n    website: '',\n    // age: '',\n    skills: [''],\n    acceptTerms: false,\n  };\n\n  validationSchema = Yup.object({\n    name: Yup.string().max(50, 'Слишком длинно - не более 50 символов').required('Имя обязательно'),\n    password: Yup.string()\n      .matches(\n        /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)[A-Za-z\\d]{8,40}$/,\n        'от 8 до 40 символов, как минимум одна цифра и одна заглавная буква',\n      )\n      .required('Пароль нужен'),\n    passwordConfirmation: Yup.string()\n      .oneOf([Yup.ref('password'), null], 'Надо точь-в-точь как пароль')\n      .required('Обязательно'),\n    email: Yup.string().email('Неправильная почта').required('Почту, пожалуйста'),\n    website: Yup.string().url('Неверный адрес сайта'),\n    age: Yup.number()\n      .min(18, 'Юнцам тут не место')\n      .max(65, 'Займись лучше внуками, дедуля')\n      .required('Сколько тебе лет?'),\n    skills: Yup.array(),\n    acceptTerms: Yup.bool().oneOf([true], 'Нужно  твое согласие'),\n  });\n\n  onSubmit = async (values, { resetForm }) => {\n    const filteredSkills = values.skills.filter(Boolean);\n\n    this.setState({\n      loading: true,\n    });\n\n    const body = {\n      ...values,\n      skills: filteredSkills,\n    };\n\n    try {\n      const res = await getData(body);\n      const { data } = res;\n\n      this.setState({\n        userCreatingErrorMessage: null,\n        netErrorMessage: null,\n        successMessage: data,\n        loading: false,\n      });\n\n      resetForm({\n        errorMessage: null,\n      });\n    } catch (err) {\n      // console.log('error', Object.entries(err), err.isAxiosError);\n      if (err.isAxiosError) {\n        this.setState({\n          netErrorMessage: 'Сервер не отвечает',\n          loading: false,\n        });\n      }\n      this.setState({\n        userCreatingErrorMessage: err.response.data,\n        successMessage: null,\n        netErrorMessage: null,\n        loading: false,\n      });\n    }\n  };\n\n  handleClearCloneError = () => {\n    this.setState({ userCreatingErrorMessage: null });\n  };\n\n  handleClearSuccess = () => {\n    this.setState({ successMessage: null });\n  };\n\n  render() {\n    const {\n      successMessage, userCreatingErrorMessage, netErrorMessage, loading,\n    } = this.state;\n    return (\n      <Formik\n        initialValues={this.initialValues}\n        validationSchema={this.validationSchema}\n        onSubmit={this.onSubmit}\n      >\n        <Form className=\"form\" onChange={this.handleClearSuccess}>\n          <div>\n            <label htmlFor=\"name\">\n              Имя\n              <span className=\"required-star\"> *</span>\n            </label>\n            <Form.Item name=\"name\">\n              <Input id=\"name\" name=\"name\" placeholder=\"Иван\" size=\"large\" />\n            </Form.Item>\n          </div>\n          <div>\n            <label htmlFor=\"pwd\">\n              Пароль\n              <span className=\"required-star\"> *</span>\n            </label>\n            <Form.Item name=\"password\">\n              <Input.Password\n                id=\"pwd\"\n                name=\"password\"\n                placeholder=\"bu7UYvjl2nkj9WNshd\"\n                size=\"large\"\n              />\n            </Form.Item>\n          </div>\n          <div>\n            <label htmlFor=\"repwd\">\n              Повторите пароль\n              <span className=\"required-star\"> *</span>\n            </label>\n            <Form.Item name=\"passwordConfirmation\">\n              <Input.Password\n                id=\"repwd\"\n                name=\"passwordConfirmation\"\n                placeholder=\"bu7UYvjl2nkj9WNshd\"\n                size=\"large\"\n              />\n            </Form.Item>\n          </div>\n          <div>\n            <label htmlFor=\"email\">\n              Электропочта\n              <span className=\"required-star\"> *</span>\n            </label>\n            <span className=\"error\">{userCreatingErrorMessage}</span>\n            <Form.Item name=\"email\">\n              <Input\n                id=\"email\"\n                name=\"email\"\n                placeholder=\"ivan@mail.ru\"\n                size=\"large\"\n                onChange={this.handleClearCloneError}\n              />\n            </Form.Item>\n          </div>\n\n          <div>\n            <label htmlFor=\"site\">Ваш сайт </label>\n            <Form.Item name=\"website\">\n              <Input id=\"site\" name=\"website\" placeholder=\"http://www.ivan.ru\" size=\"large\" />\n            </Form.Item>\n          </div>\n\n          <div>\n            <label htmlFor=\"age\">\n              Возраст\n              <span className=\"required-star\"> *</span>\n            </label>\n            <Form.Item name=\"age\">\n              <InputNumber id=\"age\" name=\"age\" placeholder=\"27\" size=\"large\" />\n            </Form.Item>\n          </div>\n\n          <div>\n            <Table\n              name=\"skills\"\n              rowKey={(row) => `${row.id}`}\n              size=\"small\"\n              pagination={false}\n              columns={[\n                {\n                  title: 'Cуперспособности',\n                  key: 'name',\n                  render: (text, record, i) => (\n                    <Input name={`skills[${i}]`} placeholder=\"Телепатия\" size=\"large\" />\n                  ),\n                },\n              ]}\n            />\n            <AddRowButton\n              name=\"skills\"\n              createNewRow={(text) => text || ''}\n              size=\"large\"\n              type=\"primary\"\n              className=\"skillsButton\"\n            >\n              Добавить суперспособность\n            </AddRowButton>\n          </div>\n\n          <div>\n            <Form.Item name=\"acceptTerms\">\n              <Checkbox id=\"terms\" name=\"acceptTerms\" />\n              <label htmlFor=\"terms\">\n                {' '}\n                Согласен с условиями\n                <span className=\"required-star\"> *</span>\n              </label>\n            </Form.Item>\n          </div>\n\n          <div className=\"formButtonsContainer\">\n            <SubmitButton loading={loading} disabled={false} size=\"large\" className=\"button\">\n              Зарегистрироваться\n            </SubmitButton>\n            <ResetButton size=\"large\" className=\"button\">\n              Очистить форму\n            </ResetButton>\n          </div>\n          <span className=\"success\">{successMessage}</span>\n          <span className=\"error\">{netErrorMessage}</span>\n        </Form>\n      </Formik>\n    );\n  }\n}\n\nexport default SubmitForm;\n","import React from 'react';\nimport Form from '../form/form';\n\nimport './app.scss';\n\nconst App = () => (\n  <div className=\"App\">\n    <h2>Форма регистрации</h2>\n    <Form />\n  </div>\n);\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './components/app/app';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}